package gexport

import (
	"github.com/stretchr/testify/assert"
	"testing"
)

func TestIsJson(t *testing.T) {
	as := assert.New(t)
	as.Equal(IsJson("abc"), false)
	as.Equal(IsJson(`select a table`), false)
	as.Equal(IsJson(`{"first": "foo", "second": "bar"}`), true)
	as.Equal(IsJson(`{"notifications":{"basic":true,"update":true,"objectlink":true},"emails":{"notification":false,"daily":false,"organizationReport":false,"newFeature":true,"monthly":false,"taskReminder":true},"notification":{"comment":{"mobile":true,"email":false},"newpost":{"mobile":true,"email":false},"newtask":{"mobile":true,"email":false},"newwork":{"mobile":true,"email":false},"newevent":{"mobile":true,"email":false},"involve":{"mobile":true,"email":false},"update":{"mobile":true,"email":false},"daily":{"email":true},"monthly":{"email":true}},"organization":{"isShowChildTeams":true},"memberBarMode":"mini","switcherOn":false,"hasNew":true,"quickReply":true,"quickCreateTask":true,"postMode":"html","openWindowMode":"slide","inboxSortMode":"unread","portalMode":"grid","messageType":"normal","libraryOrder":"updatedDesc","myFileOrder":"updatedDesc","projectOrder":"updated","myTaskCreatedSort":"dueDate","myTaskInvolvesSort":"dueDate","myTaskExecuteSort":"dueDate","lastWorkspace":"596307d0861a904ce8db27b2","industryLabels":[],"collectBehaviorLogs":true,"acceptPrivacyPolicy":true,"dateFormat":"relative","isInited":true,"activityMode":"markdown","_id":"599a973a10142c6bce41c7fc","_userId":"599a973710142c6bce41c7e5","tips":{"DashboardGuide_V_9_17":true,"labs":{"checkedtests":"dashboard:TBD;crossOrganizationPortal:TBD;","checkedObds":"dashboard;crossOrganizationPortal"},"HorizontalGroupsGuide_V_9_15":true,"DockNewUserTips_V_9_13":true,"DockGuide_V_9_13":true,"tapestryNaviGuide":true,"ScrumPanelTypeTogglerGuide_V_9_11":true,"TaskflowGuide_V_9_11":true,"AgileV2Guide_V_9_8":true,"ApplicationFieldGuideV8_12":true,"CustomScrumFlow":true,"EventFieldConfigGuide_V_9_1":true,"tapestryProjectGuide":true,"HelpCenterVisited":true,"ObjectPickerGuide":true,"workspaceSwitchGuideTip":true,"isKnownProOverdue":true,"onboarding":{"scenarioApplicationGuideFinished":true,"scenarioSelectorFinished":true,"welcomeUserFinished":true,"skitchCreatorTipShown":true,"agileTemplateFirstIntercom":true,"agileTemplateFirstVisit":true},"personalOrgTip_v10_6_displayed":true,"ProjectClusterGuideTip":true,"MiniOverviewGuideTip":true,"ProjectCluster":true,"new_system_bar_guide":true,"org_outer_members_quota_banner_v10_12_4":true,"personalOrgTip_v10_6_bannerConsumed":true,"testplan_v2_guide_stage_1":true,"testcase_group_link_guide":true,"CaseCenterVisited_V10_7_0":true,"sprint_app_custom_views_migration_guide_v10_19_0":true,"projecttag_import_projects_guide_v10_22_0":true,"teambition_day_guide_v10.24.0":true,"object_meeting_creator_onboarding":true,"object_meeting_tip_task":true,"collaboration_space":true,"all-projects":true,"quick-creator_v1":true,"create-projects":true,"portal-my-executed-guide":true,"HelpAcademyVisited":true,"academy-invite-guide-v11.3.0":true,"HelpCoworkWikiVisited":true},"tasklist":{"5965ca9a30a9993f90d18363":["5965ca9a30a9993f90d1836c","59b25ab848161079e81fa8be"],"5966e7f5d4500638fb377bcd":["59a68c0f62918a7a8afab8b2","59a68ed22abd142e3dc5ae79","59a68e4a7aa57164889e0c27","59a68d0ddc3dbf464b00bf55","59a68cbaa8e3e920e57e0d81","59a68ca911b05b3d0744bd1d"],"59e5eb61fa888b4571eac5c2":["59e5eb61fa888b4571eac5d0","59e5eb61fa888b4571eac5d1","59e5ec0dee78051bbfb301af","59e5ec1dea6cd26f74ae41af","59e5ec3da556f46f84981728"]},"lastNoticeDate":"2018-07-18T02:25:40.522Z","hasPersonalProjects":false,"personalOrganizationId":"5c3b66c0f081fc0001ae63d4","tableHeaders":{"5d3599291cb21400193214f4":[{"key":"content","width":320,"hidden":false,"sortIndex":1,"cannotHide":true},{"key":"uniqueId","width":90,"hidden":false,"sortIndex":2,"cannotHide":false},{"key":"executor","width":150,"hidden":false,"sortIndex":3,"cannotHide":false},{"key":"parent","width":158,"hidden":false,"sortIndex":4,"cannotHide":false},{"key":"_taskflowstatusId","width":150,"hidden":false,"sortIndex":5,"cannotHide":false},{"key":"sprint","width":126,"hidden":false,"sortIndex":6,"cannotHide":false},{"key":"dueDate","width":150,"hidden":false,"sortIndex":7,"cannotHide":false},{"key":"storyPoint","width":110,"hidden":false,"sortIndex":8,"cannotHide":false},{"key":"priority","width":110,"hidden":false,"sortIndex":9,"cannotHide":false},{"key":"note","width":300,"hidden":false,"sortIndex":10,"cannotHide":false},{"key":"scenarioFieldConfig","width":150,"hidden":true,"sortIndex":11,"cannotHide":false},{"key":"tagIds","width":200,"hidden":false,"sortIndex":11,"cannotHide":false},{"key":"startDate","width":150,"hidden":true,"sortIndex":17,"cannotHide":false},{"key":"recurrence","width":150,"hidden":true,"sortIndex":19,"cannotHide":false},{"key":"reminder","width":150,"hidden":true,"sortIndex":20,"cannotHide":false},{"key":"involveMembers","width":200,"hidden":true,"sortIndex":21,"cannotHide":false},{"key":"likesCount","width":110,"hidden":true,"sortIndex":22,"cannotHide":false},{"key":"creator","width":150,"hidden":true,"sortIndex":23,"cannotHide":false},{"key":"created","width":150,"hidden":false,"sortIndex":24,"cannotHide":false},{"key":"accomplished","width":150,"hidden":true,"sortIndex":25,"cannotHide":false},{"key":"updated","width":150,"hidden":true,"sortIndex":26,"cannotHide":false},{"key":"customfields","customField":{"_id":"5d35992c46718d0013881c99","_customfieldId":"5c769f998d260eb1d3014bff"},"width":300,"hidden":false,"cannotHide":false},{"key":"customfields","customField":{"_id":"5d0c44311f2f9500012d72ff","_customfieldId":"5d0c44311f2f9500012d72ff"},"width":200,"hidden":false,"cannotHide":false},{"key":"customfields","customField":{"_id":"5d0c44311f2f9500012d72fe","_customfieldId":"5d0c44311f2f9500012d72fe"},"width":200,"hidden":false,"cannotHide":false},{"key":"workTime","width":300,"hidden":true,"sortIndex":200000021,"cannotHide":false},{"key":"progress","width":110,"hidden":false,"sortIndex":200000024,"cannotHide":false}],"5d3599291cb21400193214f2":[{"key":"content","width":548,"hidden":false,"sortIndex":1,"cannotHide":true},{"key":"uniqueId","width":110,"hidden":false,"sortIndex":2,"cannotHide":false},{"key":"executor","width":151,"hidden":false,"sortIndex":3,"cannotHide":false},{"key":"parent","width":200,"hidden":false,"sortIndex":4,"cannotHide":false},{"key":"_taskflowstatusId","width":150,"hidden":false,"sortIndex":5,"cannotHide":false},{"key":"sprint","width":110,"hidden":false,"sortIndex":6,"cannotHide":false},{"key":"dueDate","width":150,"hidden":false,"sortIndex":7,"cannotHide":false},{"key":"storyPoint","width":110,"hidden":false,"sortIndex":8,"cannotHide":false},{"key":"priority","width":110,"hidden":false,"sortIndex":9,"cannotHide":false},{"key":"note","width":300,"hidden":false,"sortIndex":10,"cannotHide":false},{"key":"scenarioFieldConfig","width":150,"hidden":true,"sortIndex":11,"cannotHide":false},{"key":"tagIds","width":200,"hidden":false,"sortIndex":11,"cannotHide":false},{"key":"stage","width":150,"hidden":true,"sortIndex":14,"cannotHide":false},{"key":"startDate","width":150,"hidden":true,"sortIndex":17,"cannotHide":false},{"key":"recurrence","width":150,"hidden":true,"sortIndex":19,"cannotHide":false},{"key":"reminder","width":150,"hidden":true,"sortIndex":20,"cannotHide":false},{"key":"involveMembers","width":200,"hidden":true,"sortIndex":21,"cannotHide":false},{"key":"likesCount","width":110,"hidden":true,"sortIndex":22,"cannotHide":false},{"key":"creator","width":150,"hidden":true,"sortIndex":23,"cannotHide":false},{"key":"created","width":150,"hidden":true,"sortIndex":24,"cannotHide":false},{"key":"accomplished","width":150,"hidden":true,"sortIndex":25,"cannotHide":false},{"key":"updated","width":150,"hidden":true,"sortIndex":26,"cannotHide":false},{"key":"customfields","customField":{"_id":"5d35992ca1617c00125eb638","_customfieldId":"5b585bd1506119b5701a0322"},"width":300,"hidden":false,"cannotHide":false},{"key":"customfields","customField":{"_id":"5d35992c46718d0013881c99","_customfieldId":"5c769f998d260eb1d3014bff"},"width":300,"hidden":false,"cannotHide":false},{"key":"customfields","customField":{"_id":"5e0987e44a21e2002242ba06","_customfieldId":"5d0c44311f2f9500012d72ff"},"width":200,"hidden":false,"cannotHide":false},{"key":"customfields","customField":{"_id":"5e0987e44a21e2002242ba05","_customfieldId":"5d0c44311f2f9500012d72fe"},"width":200,"hidden":false,"cannotHide":false},{"key":"workTime","width":300,"hidden":false,"sortIndex":200000021,"cannotHide":false},{"key":"progress","width":110,"hidden":false,"sortIndex":200000024,"cannotHide":false}]},"language":"zh","isUsePanel":true,"selections":{}}`), true)
}

func TestCapitalize(t *testing.T) {
	as := assert.New(t)
	as.Equal(Capitalize("abc"), "Abc")
	as.Equal(Capitalize("_abc"), "_abc")
}

func TestNameCamelCase(t *testing.T) {
	as := assert.New(t)
	as.Equal(NameCamelCase("str_to_byte"), "StrToByte")
	as.Equal(NameCamelCase("_str_to_byte"), "StrToByte")
	as.Equal(NameCamelCase("iL"), "IL")
	as.Equal(NameCamelCase("reward_buyers"), "RewardBuyers")
}
